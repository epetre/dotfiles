class PreferenceSheetTeamIdFilterValidator < ActiveModel::EachValidator
  def validate_each(preference_sheet, attribute, value)
    unless preference_sheet.team_integration_id_filter.empty?
      selected_ids = preference_sheet.team_integration_id_filter
      ids = preference_sheet.available_team_integration_ids.collect{|x| x[1]}
      puts "aaaaaaaaaaaaaaaaaaaaaaaaaaa==>>>>>>>"
      unless selected_ids.all?{|e| ids.include? e}
        preference_sheet.errors[:base] << 'Those projects are not recognized'
      end
    end
  end
end
