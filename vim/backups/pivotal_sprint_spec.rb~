require 'spec_helper'

describe PivotalSprint do
  before :each do
    @team = PivotalTeam.create!(name: 'allo', timezone: '-05:00')
    @sprint = PivotalSprint.new(name: 'test', start_date: Date.new(2013, 1, 14), duration: 10, include_weekend: true, total_points: 100, integration_id: 'abc')
    @sprint.team = @team
    @sprint.save!
  end
  it "adds to duration when include_weekend gets changed to false" do
    @sprint.include_weekend = false
    sprint.update_duration
    @sprint.duration.should == 8
  end

  it "x removes to duration when include_weekend gets changed to true" do
    sprint = PivotalSprint.new(name: 'test', start_date: Date.new(2013, 1, 14), duration: 10, include_weekend: true, total_points: 100, integration_id: 'abc')
    sprint.team = @team
    sprint.save!

    sprint.update_duration
    sprint.include_weekend = false
    sprint.duration.should == 8

    sprint.update_duration
    sprint.include_weekend = true
    sprint.duration.should == 10
  end

  it "y removes to duration when include_weekend gets changed to true" do
    sprint = PivotalSprint.new(name: 'test', start_date: Date.new(2013, 1, 14), duration: 10, include_weekend: false, total_points: 100, integration_id: 'abc')
    sprint.update_duration
    sprint.duration.should == 8

    sprint.include_weekend = true
    sprint.update_duration
    sprint.duration.should == 10
  end
end
