class ReportsController < ApplicationController
  load_and_authorize_resource :report
  before_filter :load_report

  # GET /report
  # GET /report.xml
  def show
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @report }
    end
  end

  protected
    def load_report
      from = params[:daterange].nil? ? Date.today : Date.parse(params[:daterange].split('to')[0])
      to = params[:daterange].nil? ? Date.today : Date.parse(params[:daterange].split('to')[1])

      @report = Report.new(from, to)
    end
end
