class MoveUserIntegrationIdAndIntegrationHostToPreferenceSheet < ActiveRecord::Migration
  def up
    add_column :preference_sheets, :integration_id, :string
    add_column :preference_sheets, :integration_host, :string
    execute "UPDATE users, preference_sheets 
             SET p.integration_id=u.integration_id, 
                 p.integration_host=u.integration_host 
             WHERE u.id = p.user_id"
    remove_column :users, :integration_id
    remove_column :users, :integration_host
  end

  def down
    add_column :users, :integration_id, :string
    add_column :users, :integration_host, :string
    execute "UPDATE users u, preference_sheets p SET u.integration_id = p.integration_id, u.integration_host = p.integration_host WHERE u.id = p.user_id"
    remove_column :preference_sheets, :integration_id
    remove_column :preference_sheets, :integration_host
  end
end
